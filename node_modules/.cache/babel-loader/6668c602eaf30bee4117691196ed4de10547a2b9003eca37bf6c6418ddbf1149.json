{"ast":null,"code":"var _jsxFileName = \"/home/glory/to-do-app/src/components/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Redirect, Switch } from 'react-router';\nimport axios from 'axios';\nimport LoginForm from './LoginForm';\nimport TodoList from './TodoList';\nimport TodoForm from './TodoForm';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [user, setUser] = useState(null);\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      axios.get('/api/user', {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      }).then(response => {\n        setUser(response.data);\n      }).catch(() => {\n        localStorage.removeItem('token');\n      });\n    }\n  }, []);\n  const handleLogin = (email, password) => {\n    axios.post('/api/auth/login', {\n      email,\n      password\n    }).then(response => {\n      localStorage.setItem('token', response.data.token);\n      setUser(response.data.user);\n    });\n  };\n\n  // const handleLogout = () => {\n  //   localStorage.removeItem('token');\n  //   setUser(null);\n  // };\n\n  const PrivateRoute = _ref => {\n    let {\n      component: Component,\n      ...rest\n    } = _ref;\n    return /*#__PURE__*/_jsxDEV(Route, {\n      ...rest,\n      render: props => user ? /*#__PURE__*/_jsxDEV(Component, {\n        ...props\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(Redirect, {\n        to: \"/login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 5\n    }, this);\n  };\n  return /*#__PURE__*/_jsxDEV(Router, {\n    children: /*#__PURE__*/_jsxDEV(Switch, {\n      children: [/*#__PURE__*/_jsxDEV(Route, {\n        path: \"/login\",\n        render: props => user ? /*#__PURE__*/_jsxDEV(Redirect, {\n          to: \"/\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(LoginForm, {\n          ...props,\n          handleLogin: handleLogin\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(PrivateRoute, {\n        exact: true,\n        path: \"/\",\n        component: TodoList\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(PrivateRoute, {\n        path: \"/create\",\n        component: TodoForm\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(PrivateRoute, {\n        path: \"/edit/:id\",\n        component: TodoForm\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"5s2qRsV95gTJBmaaTh11GoxYeGE=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","Redirect","Switch","axios","LoginForm","TodoList","TodoForm","jsxDEV","_jsxDEV","App","_s","user","setUser","token","localStorage","getItem","get","headers","Authorization","then","response","data","catch","removeItem","handleLogin","email","password","post","setItem","PrivateRoute","_ref","component","Component","rest","Route","render","props","fileName","_jsxFileName","lineNumber","columnNumber","to","Router","children","path","exact","_c","$RefreshReg$"],"sources":["/home/glory/to-do-app/src/components/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Redirect, Switch } from 'react-router';\n\nimport axios from 'axios';\nimport LoginForm from './LoginForm';\nimport TodoList from './TodoList';\nimport TodoForm from './TodoForm';\n\nfunction App() {\n  const [user, setUser] = useState(null);\n\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      axios.get('/api/user', { headers: { Authorization: `Bearer ${token}` } })\n        .then(response => {\n          setUser(response.data);\n        })\n        .catch(() => {\n          localStorage.removeItem('token');\n        });\n    }\n  }, []);\n\n  const handleLogin = (email, password) => {\n    axios.post('/api/auth/login', { email, password })\n      .then(response => {\n        localStorage.setItem('token', response.data.token);\n        setUser(response.data.user);\n      });\n  };\n\n  // const handleLogout = () => {\n  //   localStorage.removeItem('token');\n  //   setUser(null);\n  // };\n\n  const PrivateRoute = ({ component: Component, ...rest }) => (\n    <Route {...rest} render={(props) => (\n      user\n        ? <Component {...props} />\n        : <Redirect to='/login' />\n    )} />\n  );\n\n  return (\n    <Router>\n      <Switch>\n        <Route path='/login' render={(props) => (\n          user\n            ? <Redirect to='/' />\n            : <LoginForm {...props} handleLogin={handleLogin} />\n        )} />\n        <PrivateRoute exact path='/' component={TodoList} />\n        <PrivateRoute path='/create' component={TodoForm} />\n        <PrivateRoute path='/edit/:id' component={TodoForm} />\n      </Switch>\n    </Router>\n  );\n}\n\nexport default App;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,QAAQ,EAAEC,MAAM,QAAQ,cAAc;AAE/C,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,SAAS,MAAM,aAAa;AACnC,OAAOC,QAAQ,MAAM,YAAY;AACjC,OAAOC,QAAQ,MAAM,YAAY;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAElC,SAASC,GAAGA,CAAA,EAAG;EAAAC,EAAA;EACb,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGb,QAAQ,CAAC,IAAI,CAAC;EAEtCC,SAAS,CAAC,MAAM;IACd,MAAMa,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C,IAAIF,KAAK,EAAE;MACTV,KAAK,CAACa,GAAG,CAAC,WAAW,EAAE;QAAEC,OAAO,EAAE;UAAEC,aAAa,EAAG,UAASL,KAAM;QAAE;MAAE,CAAC,CAAC,CACtEM,IAAI,CAACC,QAAQ,IAAI;QAChBR,OAAO,CAACQ,QAAQ,CAACC,IAAI,CAAC;MACxB,CAAC,CAAC,CACDC,KAAK,CAAC,MAAM;QACXR,YAAY,CAACS,UAAU,CAAC,OAAO,CAAC;MAClC,CAAC,CAAC;IACN;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMC,WAAW,GAAGA,CAACC,KAAK,EAAEC,QAAQ,KAAK;IACvCvB,KAAK,CAACwB,IAAI,CAAC,iBAAiB,EAAE;MAAEF,KAAK;MAAEC;IAAS,CAAC,CAAC,CAC/CP,IAAI,CAACC,QAAQ,IAAI;MAChBN,YAAY,CAACc,OAAO,CAAC,OAAO,EAAER,QAAQ,CAACC,IAAI,CAACR,KAAK,CAAC;MAClDD,OAAO,CAACQ,QAAQ,CAACC,IAAI,CAACV,IAAI,CAAC;IAC7B,CAAC,CAAC;EACN,CAAC;;EAED;EACA;EACA;EACA;;EAEA,MAAMkB,YAAY,GAAGC,IAAA;IAAA,IAAC;MAAEC,SAAS,EAAEC,SAAS;MAAE,GAAGC;IAAK,CAAC,GAAAH,IAAA;IAAA,oBACrDtB,OAAA,CAAC0B,KAAK;MAAA,GAAKD,IAAI;MAAEE,MAAM,EAAGC,KAAK,IAC7BzB,IAAI,gBACAH,OAAA,CAACwB,SAAS;QAAA,GAAKI;MAAK;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QAAI,gBACxBhC,OAAA,CAACP,QAAQ;QAACwC,EAAE,EAAC;MAAQ;QAAAJ,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IACzB;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QAAG;EAAA,CACN;EAED,oBACEhC,OAAA,CAACkC,MAAM;IAAAC,QAAA,eACLnC,OAAA,CAACN,MAAM;MAAAyC,QAAA,gBACLnC,OAAA,CAAC0B,KAAK;QAACU,IAAI,EAAC,QAAQ;QAACT,MAAM,EAAGC,KAAK,IACjCzB,IAAI,gBACAH,OAAA,CAACP,QAAQ;UAACwC,EAAE,EAAC;QAAG;UAAAJ,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,QAAG,gBACnBhC,OAAA,CAACJ,SAAS;UAAA,GAAKgC,KAAK;UAAEZ,WAAW,EAAEA;QAAY;UAAAa,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA;MACnD;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QAAG,eACLhC,OAAA,CAACqB,YAAY;QAACgB,KAAK;QAACD,IAAI,EAAC,GAAG;QAACb,SAAS,EAAE1B;MAAS;QAAAgC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QAAG,eACpDhC,OAAA,CAACqB,YAAY;QAACe,IAAI,EAAC,SAAS;QAACb,SAAS,EAAEzB;MAAS;QAAA+B,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QAAG,eACpDhC,OAAA,CAACqB,YAAY;QAACe,IAAI,EAAC,WAAW;QAACb,SAAS,EAAEzB;MAAS;QAAA+B,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QAAG;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAC/C;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,QACF;AAEb;AAAC9B,EAAA,CAnDQD,GAAG;AAAAqC,EAAA,GAAHrC,GAAG;AAqDZ,eAAeA,GAAG;AAAC,IAAAqC,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}